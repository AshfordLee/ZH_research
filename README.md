# 股票SMA计算工具

这个项目会自动基于随机的时间戳生成股票价格数据，然后用这些数据来计算SMA（简单移动平均线）并输出结果。

## 项目环境配置

- Python 3.9+
- Ubuntu 22.04或其他操作系统

```bash
pip install -r requirements.txt
```

## 运行方法

运行主程序来开始交互式会话：

```bash
python backtrack_large_window_to_csv.py
```

按照提示输入以下参数：
- 桶的数量（默认为10）
- 回溯窗口大小（单位：秒，默认为1000）
- 起始日期和时间(默认为2025-04-04 09:30:00)
- 要生成的数据点数量(即数据流生成的需要计算SMA的数据点个数)
- 输出文件路径(输出计算明细csv的路径)

## 示例输出

程序会生成类似下方的输出：

```
时间戳                价格    SMA
2025-04-04 09:30:00  100.00  100.00
2025-04-04 09:32:24   99.05   99.98
2025-04-04 09:37:35   98.54   99.04
...
```

## 参数设置

建议所有的参数都保留默认，SMA的计算可以把output.csv放到excel里选定回溯窗口计算均值来验证。

注意起始日期不要输入双休日，起始时间不要输入非交易时段(程序应该会自动移到距离输入最近的交易时段开始产生数据)，毕竟数据流不可能产生非交易时段的价格数据。



## CSV输出字段说明

输出的CSV文件包含以下字段：
- 索引：数据点序号
- 时间戳：Unix时间戳
- 日期时间：格式化的日期和时间
- 与当前时间的差距(秒)：相对于最新数据点的时间差
- 交易时段：上午/下午
- 是否为交易时间：是/否
- 价格：数据点的价格
- SMA：该时间点的移动平均值
- 点类型：原始数据点/补充点
- 跨日/跨时段：显示是否跨越交易日或交易时段